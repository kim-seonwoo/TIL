# 24.01.31

# 프로퍼티 옵저버

- 내가 관찰하는 프로퍼티에 값을 설정하려고 할 때 변경을 감지한다.
→ 중요! 새로운 값이 현재 값과 동일하더라도 속성값이 설정되면 호출된다.

값이 저장되기 직전에 → willSet → 값이 저장되기 직전에 새로 저장될 값이 파라미터로 전달된다.
값이 저장된 직후에  → didSet → 값이 저장된 직후에 이전 프로퍼티의 값이 파라미터로 전달된다!

# **Property Wrapper**

- **Property Wrapper는 반복되는 로직들을 프로퍼티 자체에 연결할 수 있다.**
- ex) UserDefault에 대한 처리를 UserDefaultsWrapper로 해줄 수 있음.
- `@propertyWrapper` 이니셜라이져
- **@propertyWrapper**를 붙혀 컴파일러에게 **"이 타입은 특별하다"**고 알려줍니다.
- **그 행동을 정의하는 타입을 만든다고 생각**하고 이름을 지정하면됨!
- ii) `wrappedValue` property 를 정의한 structure, enumeration, class를 만든다.
- 요구되는 wrappedValue라는 프로퍼티에 우리의 반복되는 로직을 넣으면 됩니다.

# 인스턴스 메소드

- 인스턴스 메소드는 **특정 클래스, 구조체 또는 열거형의 인스턴스에 속하는 함수**

### mutating

- 메소드는 메소드 내에서 프로퍼티를 변경할 수 있으며 메소드가 끝나면 변경된 내용이 원래 구조체에 다시 기록
- 암시적 자체 프로퍼티에 완전히 새로운 인스턴스를 할당 할 수도 있다. 이 새 인스턴스는 메소드가 종료되면 기존 인스턴스를 바꿉니다.

# 타입 메소드

- 타입 자체에서 호출되는 메서드.
- static → override 허용 x

# 싱글톤 패턴

- **한 개의 클래스로 만드는 객체는 단 한개여야만 한다는 규칙을 가진 디자인 패턴**
    
    프로그램 전체에 단 하나의 **전역 객체**를 만들어놓고 여기저기서 이 **하나의 객체에만 접근할 수 있도록 하면 된다.**
    
    ## 장점
    
    ### 1. 메모리를 단 한번만 사용한다.
    
    > 해당 객체는 단 한번만 만들어지기 때문에 메모리 관리가 편하다는 장점이 있다. 
    한번 만들어둔 객체를 꾸준히 재사용할 수 있다.
    > 
    
    ### 2. 객체 접근 시간이 줄어든다.
    
    > 다시 메모리를 할당하고, 초기화(init)하는 과정과 시간이 줄어드니, 
    한번 만들어두기만 하면 다시 접근할 때는 매번 객체를 만들 때보다 조금이나마 더 빠르다.
    > 
    
    ### 3. 전역 범위에서 상태, 데이터 전달이 쉬워진다.
    
    > 어디서든 접근할 수 있기 때문에 어떤 상태를 표시하거나, 데이터를 공유하기에 적절하다. 
    단 하나의 객체만 있고, 잘 신경써서 동시성 문제가 생기지 않도록 짜기만 한다면 
    걱정 없이 상태나 데이터를 전달할 수 있다.
    > 
    
    ## 단점
    
    ### 1. 테스트가 힘들다.
    
    > 싱글톤 class는 위에서 살짝 봤던 것처럼 `init`을 `private`로 설정해 유일성을 보장하는 경우가 많다. 
    그런 의도에서야 좋지만 이렇게 생성을 제한해버리면 테스트용 Mock 객체를 만들어내기 어려워진다. 
    이러면 관련된 로직을 테스트하기 어려워지고, 테스트 코드가 중요한 경우에는 꽤 곤란한 존재가 될 수 있다.
    > 
    
    ### 2. 의존성을 만들어낸다.
    
    > ‘여기저기’서, ‘쉽게’ 접근할 수 있는 탓에, 프로젝트 이곳저곳에서 상상 이상으로 사용될 수 있다. 
    이러면 우리가 어떤 객체와 연결되어있는지 다 찾아내기도 힘들어진다.
    > 
    
    ### 3. 멀티 스레드 환경에서 위험할 수 있다.
    
    > 멀티 스레드 환경에서 어쩌다보니 싱글톤 객체가 2개가 생기는 문제가 발생할 수 있다. 
    또한 싱글톤 객체 내부의 데이터를 동기적으로 처리하지 않으면 여러 객체가 동시에 사용하다가 꼬여버릴 가능성도 있다.
    >