# OSI 7계층

![스크린샷 2024-09-27 오후 10.14.47.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2a65dd92-1694-460a-a843-42f41adf38d8/4dbec85a-9c21-491e-a75a-06178cf942cb/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-09-27_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_10.14.47.png)

# TCP/IP 프로토콜 스택

- 애플리케이션(HTTP, FTP), 트랜스포트(TCP, UDP), 인터넷(IP), 네트워크 엑세스로 추상화함.
- 기존의 상위 계층 개발자는 애플리케이션 계층만 신경쓰면 된다.

# 1. 인터넷 통신 과정 요약 정리

- 클라가 도메인을 이용해 접속 시도
- DNS에서 IP 주소를 응답
- 클라이언트는 데이터를 패킷들로 만듦
- 각각의 패킷에는 TCP 정보 추가 포트정보나 패킷의 순서, 검증 정보등을 추가
- 출발, 목적지 IP, 관리정보들을 추가하여 목적지를 지정
- 3 way handshake (syn, ack) 정찰병

# 패킷

- payload : 전송하고자 하는 데이터의 한 블록
- 주소지 정보 : 발신지, 목적지 주소
- 관리 정보 : Header, IPv6과 같이 망이 패킷을 목적으로 전달하는데 필요한 정보

# IP의 한계점

- 비연결성, 비신뢰성, 구분의 모호함

# TCP, UDP

- 연결 지향 프로토콜
- 3 way handshake
- 정보를 같이 실어서 보낸다.

1. _SYN(Synchronizer) 접속 요청 메세지 전송_
2. _SYN + ACK: 응답 메세지와 함께 접속 요청 메세지를 같이 보낸다._
3. _ACK: 요청 응답을하며 이제 양측이 연결이 되었음을 보장 할 수 있게 된다._
4. _데이터 전송: 이제 데이터를 송신 혹은 수신할 수 있다._

→ UDP
속도가 빠르다, 대신 정보가 덜하다.

- 체크섬 : 무결성 보호 중복 검사

# PORT

- 내 컴퓨터 내 수많은 애플리케이션의 식별자가 되는 경로

0 - 65535

# URI, URL, URN

- 둘다, Location, Name

**scheme**: 주로 프로토콜을 사용하며 어떤 방식으로 자원에 접근할 것인가 하는 규칙

◦

Ex: http, https, ftp, ...

**userinfo**: 사용자 정보를 포함해서 인증에 사용하는데 거의 사용하지 않는다.

◦

Ex: GitLab 접속시 사용자정보를 입력하거나, SSH 유저정보를 넣을때도 사용하고는 한다.

-

**host**: 호스트명, 도메인명 또는 IP주소를 직접 사용할 수도 있다.

-

**port:** 접속 포트로 IP 가 컴퓨터의 논리적 주소라면, port는 컴퓨터에서 실행되는 앱의 주소라 할 수 있다. 생략도 가능하며 http는 80, https는 443생략한다.

-

**path**: 리소스 경로로 계층적 구조로 되어 있다.

◦

_/departments_

◦

_/departments/rnd_

◦

_/departments/rnd/members_

◦

_/departments/rnd/members/catsbi_

-

**query** : key/value형태의 Pair Resource로 ?로 시작하며 &으로 자원 추가가 가능하다.

◦

_?a=b&c=d_

◦

query parameter, query string등으로 부른다.

-

**fragment**: html내의 북마크 등에 사용되며 서버에 전송되는 정보가 아니다.

https://ko.wikipedia.org/wiki/즐겨찾기**#같이_보기**

# HTTP 기본

- TCP 통신은 3 way handshake 때문에 신뢰성과 연결성은 보장하지만, 이 과정에 걸리는 시간만큼 속도가 떨어질 수 밖에 없다.
  그렇기에 HTTP/3 에서는 UDP 프로토콜을 애플리케이션 레벨에서 재설계를 해서 속도를 높혔다.

# 클라이언트 서버 구조

# 무상태 프로토콜

- 서버가 클라이언트의 상태를 보존하지 않는다.
- 수평적 확장이 가능하다.

# 비연결성

**해결책 - HTTP 지속 연결(Persistent Connections)**

# HTTP 메서드

- GET
  리소스 조회에 사용된다.
  서버에 전달할 데이터는 query string을 통해 전달한다.
  메세지 바디는 사용은 가능하지만, 지원되지 않는 곳이 많아 권장되지 않는다.
- POST
  메세지 바디를 통해 서버로 요청 데이터를 전달하면 해당 데이터를 처리한다.
- PUT
  리소스 대체의 목적으로 리소스가 있을 경우 대체
- PATCH
  리소스 부분 변경, 대치가 아닌 필요한 부분만 업데이트
