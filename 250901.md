오늘 트러블슈팅 핵심 요약(원인 → 해결)

1. JDK 17 설치했는데 java_home이 못 찾음

- 원인: /Library/Java/JavaVirtualMachines 심볼릭 링크와 PATH/JAVA_HOME 미설정, 그리고 JAVA_HOME이 아닌 JAVA_HOME_VERSION 사용
- 해결:
  sudo ln -sfn /opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-17.jdk
  export JAVA_HOME="/opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk/Contents/Home"
  export PATH="$JAVA_HOME/bin:$PATH"
  java -version 확인

1. CocoaPods 1.15.2로 고정 설치 이슈

- 원인: brew로 세부버전 고정 불가, 시스템 Ruby에 설치 시 권한 오류, pod 명령 미인식
- 해결 루트 A(권장, 프로젝트 고정): ios 폴더에 Gemfile로 고정 후 bundle exec 사용
  (ios/Gemfile)
  source "[https://rubygems.org](https://rubygems.org/)"
  gem "cocoapods", "1.15.2"
  실행: cd ios && gem install bundler -N && bundle install && bundle exec pod --version
- 해결 루트 B(전역): rbenv로 활성 Ruby에 설치 후 PATH/shims 반영
  rbenv local 3.1.4 또는 3.1.3 설치 후 활성화 → gem install cocoapods -v 1.15.2 -N → rbenv rehash → pod --version

1. pod 명령어가 계속 “not found”

- 원인: 활성 Ruby와 gem 설치 Ruby가 다르거나 gem 실행 경로(Gem.bindir)가 PATH에 없음, rbenv 미초기화/미리해시
- 해결:
  eval "$(rbenv init - zsh)" → ruby -v가 rbenv 버전 가리키는지 확인
  rbenv rehash
  필요 시 일시적으로 PATH 추가: export PATH="$(ruby -r rubygems -e 'puts Gem.bindir'):$PATH"

1. glog.podspec 에러(undefined method [] for nil:NilClass)

- 원인: xcodebuild -version 출력 파싱 실패(활성 경로가 CommandLineTools를 가리킴)
- 해결:
  sudo xcode-select -s /Applications/Xcode.app/Contents/Developer
  sudo xcodebuild -license accept
  xcodebuild -version 확인 후 cd ios && pod install(또는 bundle exec pod install)
